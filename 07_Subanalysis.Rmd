---
title: "07_Subanalysis"
author: "Chiara Draxler"
date: "24 1 2022"
output: html_document
---
#1. Load Data
```{r}

load("Fake_cccu_SA.RData")
```


#2. Load Packages
```{r}
library(lme4)
```


#3. Models
currently impossible to test bc of problems with missingness

##3.1 Model 1: basic model
```{r}
#repeat m1
sa_m1 <- glmer(switch ~ hc + (1 + hc | CASEID), family = binomial, data = Fake_cccu_SA)

summary(sa_m1)

confint(sa_m1)
```


##3.2 Model 2: including directly with contraceptive method associated predictors

DURATION and satisfaction!

```{r}
sa_m2 <- glmer(switch ~ hc*contra_satis + hc* contra_duration +  contra_satis * contra_duration + (1 + hc | CASEID), family = binomial, data = Fake_cccu_SA)

summary(sa_m2)
confint(sa_m2)
```

##3.3 Model 3: including not directly with contraceptive method associated predictors
```{r}
sa_m3 <- glmer(switch ~ hc * contra_satis + hc* contra_duration +  contra_satis * contra_duration + hc * sexual_satisfaction + hc * sex_freq + (1 + hc | CASEID), family = binomial, data = Fake_cccu_SA)

summary(sa_m3)
confint(sa_m3)

```

##3.4 Model 4: Controlling for observed selection effects
```{r}
m4 <- glmer(switch ~ hc * contra_satis + hc* contra_duration +  contra_satis * contra_duration + hc * sexual_satisfaction + hc * sex_freq ++  AGE + DEGREE_recode + POVRATE + HLTHPROB_recode + MEDPROB_recode +  GAPINS_recode + TYPEINS_recode + NKIDS_t1 +  pregnant_between_waves + had_baby_between_waves+ Avoid_recode + FEELPG_recode + rel_dur_factor + (1 + hc | CASEID), family = binomial, data = Fake_cccu_SA)

summary(sa_m4)

confint(sa_m4)
```

