---
title: "Outlier_trimming"
author: "Chiara Draxler"
date: "23 5 2022"
output: html_document
---
```{r}
##Outliers


#see outliers
boxplot(cccu_MA$AGE)$out #no
boxplot(cccu_MA$hc)$out #no
boxplot(cccu_MA$contra_satis)$out #outlier!!!
boxplot(cccu_MA$sexual_satisfaction)$out #no
boxplot(cccu_MA$sex_freq)$out#outlier! but no trimming possible bc factor
boxplot(cccu_MA$AGE)$out #no
boxplot(cccu_MA$DEGREE_recode)$out#outlier! but no trimming possible bc factor
boxplot(cccu_MA$POVRATE)$out#outlier
boxplot(cccu_MA$HLTHPROB_recode)$out#outlier but no trimming possible bc factor
boxplot(cccu_MA$MEDPROB_recode)$out#outlier but no trimming possible bc factor
boxplot(cccu_MA$GAPINS_recode)$out#outlier but no trimming possible bc factor
boxplot(cccu_MA$TYPEINS_recode)$out#outlier but no trimming possible bc factor
boxplot(cccu_MA$NKIDS_t1)$out
boxplot(cccu_MA$pregnant_between_waves)$out#outlier but no trimming possible bc
table(cccu_MA$pregnant_between_waves)
boxplot(cccu_MA$had_baby_between_waves)$out#outlier but no trimming possible bc factor
boxplot(cccu_MA$Avoid_r)$out
table(cccu_MA$Avoid_r)
boxplot(cccu_MA$FEELPG_recode)$out
boxplot(cccu_MA$rel_dur_factor)$out


#dealing with outliers for numerical variables

##contra_satis
cccu_MA <- cccu_MA %>%
  mutate(contra_satis_trim = ifelse(contra_satis > (mean(contra_satis)+3*sd(contra_satis)), mean(contra_satis), contra_satis))
describe(cccu_MA$contra_satis)
cccu_MA %>% select(CASEID, WAVE, contra_satis_trim, contra_satis) %>% View()

##sexual satisfaction
cccu_MA <- cccu_MA %>%
  mutate(sexual_satisfaction_trim = ifelse(sexual_satisfaction > (mean(sexual_satisfaction)+3*sd(sexual_satisfaction)), mean(sexual_satisfaction), sexual_satisfaction))
describe(cccu_MA$sexual_satisfaction)

cccu_MA %>% select(CASEID, WAVE, sexual_satisfaction_trim, sexual_satisfaction) %>% View()

##povrate

cccu_MA <- cccu_MA %>%
  mutate(POVRATE_trim = ifelse(POVRATE > (mean(POVRATE)+3*sd(POVRATE)), mean(POVRATE), POVRATE))
describe(cccu_MA$POVRATE)
cccu_MA %>% select(CASEID, WAVE, POVRATE_trim, POVRATE) %>% View()

table(cccu_MA$TYPEINS_recode)

##Age
cccu_MA <- cccu_MA %>%
  mutate(AGE_trim = ifelse(AGE > (mean(AGE)+3*sd(AGE)), mean(AGE), AGE))
describe(cccu_MA$AGE)
cccu_MA %>% select(CASEID, WAVE, AGE_trim, AGE) %>% View()

#Avoid
cccu_MA <- cccu_MA %>%
  mutate(Avoid_r_trim = ifelse(Avoid_r > (mean(Avoid_r)+3*sd(Avoid_r)), mean(Avoid_r), Avoid_r))
describe(cccu_MA$Avoid_r)
cccu_MA %>% select(CASEID, WAVE, Avoid_r_trim, Avoid_r) %>% View()

#Feelpg
cccu_MA <- cccu_MA %>%
  mutate(FEELPG_recode_trim = ifelse(FEELPG_recode > (mean(FEELPG_recode)+3*sd(FEELPG_recode)), mean(FEELPG_recode), FEELPG_recode))
describe(cccu_MA$FEELPG_recode)
cccu_MA %>% select(CASEID, WAVE, FEELPG_recode_trim, FEELPG_recode) %>% View()


```

```

